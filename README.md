# realtime-translation-widget
å®æ—¶ç¿»è¯‘å°æµ®çª—
# å®æ—¶è¯­éŸ³ç¿»è¯‘æµ®çª—ç³»ç»Ÿ

![Project Status](https://img.shields.io/badge/status-active-brightgreen.svg)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
<!-- å¦‚æœæœ‰CI/CDæˆ–éƒ¨ç½²çŠ¶æ€ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å¾½ç«  -->

## ğŸ“š é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ—¨åœ¨ä¸ºå­¦é™¢å®˜æ–¹ç½‘ç«™æä¾›ä¸€ä¸ªå®æ—¶è¯­éŸ³ç¿»è¯‘æµ®çª—åŠŸèƒ½ã€‚é€šè¿‡é›†æˆç§‘å¤§è®¯é£çš„è¯­éŸ³è¯†åˆ«å’Œç¿»è¯‘APIï¼Œç”¨æˆ·å¯ä»¥åœ¨æµè§ˆå­¦é™¢ç½‘ç«™æ—¶ï¼Œé€šè¿‡éº¦å…‹é£è¿›è¡Œè¯­éŸ³è¾“å…¥ï¼Œç³»ç»Ÿå°†å®æ—¶è½¬å†™ä¸ºæ–‡å­—å¹¶ç¿»è¯‘æˆæŒ‡å®šè¯­è¨€ï¼Œä»¥æµ®çª—å½¢å¼å±•ç¤ºã€‚è¿™æå¤§åœ°æå‡äº†ç½‘ç«™çš„å¯è®¿é—®æ€§å’Œç”¨æˆ·ä½“éªŒï¼Œå°¤å…¶å¯¹äºéä¸­æ–‡æ¯è¯­çš„ç”¨æˆ·ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

*   **å®æ—¶è¯­éŸ³è¾“å…¥ï¼š** æµè§ˆå™¨å†…ç›´æ¥é€šè¿‡éº¦å…‹é£é‡‡é›†è¯­éŸ³ã€‚
*   **å®æ—¶è½¬å†™ï¼š** å°†è¯­éŸ³å†…å®¹å³æ—¶è½¬æ¢ä¸ºæ–‡æœ¬ã€‚
*   **å®æ—¶ç¿»è¯‘ï¼š** å°†è½¬å†™åçš„æ–‡æœ¬å®æ—¶ç¿»è¯‘ä¸ºç›®æ ‡è¯­è¨€ï¼ˆä¾‹å¦‚ï¼šä¸­æ–‡è¯‘è‹±æ–‡ï¼‰ã€‚
*   **æµ®çª—å±•ç¤ºï¼š** ä»¥å¯æ‹–åŠ¨ã€å¯éšè—çš„æµ®çª—å½¢å¼åœ¨ç½‘ç«™é¡µé¢ä¸Šå±•ç¤ºè½¬å†™å’Œç¿»è¯‘ç»“æœã€‚
*   **åç«¯ç­¾åæœåŠ¡ï¼š** æä¾›å®‰å…¨çš„é‰´æƒç­¾åï¼Œä¿æŠ¤ç§‘å¤§è®¯é£APIå¯†é’¥ã€‚

## âš™ï¸ æŠ€æœ¯æ ˆ

*   **å‰ç«¯:**
    *   HTML, CSS, JavaScript
    *   ç§‘å¤§è®¯é£ JavaScript SDK
*   **åç«¯:**
    *   Node.js (ç”¨äºç­¾åæœåŠ¡)
    *   Express.js (Webæ¡†æ¶)
    *   CORS (è·¨åŸŸèµ„æºå…±äº«)
*   **å¤–éƒ¨æœåŠ¡:**
    *   ç§‘å¤§è®¯é£å¼€æ”¾å¹³å° å®æ—¶è¯­éŸ³è½¬å†™ API
    *   ç§‘å¤§è®¯é£å¼€æ”¾å¹³å° æœºå™¨ç¿»è¯‘ API

## ğŸš€ éƒ¨ç½²æŒ‡å—

æœ¬é¡¹ç›®åŒ…å«å‰ç«¯å’Œåç«¯ä¸¤éƒ¨åˆ†ï¼Œéœ€è¦åˆ†åˆ«éƒ¨ç½²ã€‚

### 1. å‰æœŸå‡†å¤‡

åœ¨éƒ¨ç½²ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²å®Œæˆä»¥ä¸‹å‡†å¤‡å·¥ä½œï¼š

*   **è·å–ç§‘å¤§è®¯é£APIå‡­è¯ï¼š**
    *   å‰å¾€ [ç§‘å¤§è®¯é£å¼€æ”¾å¹³å°](https://www.xfyun.cn/) æ³¨å†Œè´¦å·ã€‚
    *   åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ï¼Œå¹¶å¼€é€š**å®æ—¶è¯­éŸ³è½¬å†™**å’Œ**æœºå™¨ç¿»è¯‘**æœåŠ¡ã€‚
    *   è·å–æ‚¨çš„ **AppID**, **APIKey**, **APISecret**ã€‚
*   **æœåŠ¡å™¨ç¯å¢ƒï¼š**
    *   ä¸€å°è¿è¡Œ **Node.js** (ç‰ˆæœ¬ 14+) çš„æœåŠ¡å™¨ç”¨äºåç«¯æœåŠ¡ã€‚
    *   ä¸€å°å¯æä¾›é™æ€æ–‡ä»¶è®¿é—®çš„ **Web æœåŠ¡å™¨** (å¦‚ Nginx, Apache) ç”¨äºå‰ç«¯æ–‡ä»¶ï¼Œé€šå¸¸å°±æ˜¯å­¦é™¢å®˜ç½‘çš„æœåŠ¡å™¨ã€‚
*   **Gitï¼š** ç¡®ä¿æ‚¨çš„éƒ¨ç½²ç¯å¢ƒå·²å®‰è£… Gitã€‚

### 2. åç«¯æœåŠ¡éƒ¨ç½² (`signa-server.js`)

åç«¯æœåŠ¡è´Ÿè´£ç”Ÿæˆç§‘å¤§è®¯é£ API çš„ç­¾åï¼Œéƒ¨ç½²æ­¥éª¤å¦‚ä¸‹ï¼š

1.  **å…‹éš†ä»“åº“ï¼š**
    ```bash
    git clone https://github.com/ä½ çš„GitHubç”¨æˆ·å/ä½ çš„ä»“åº“åç§°.git
    cd ä½ çš„ä»“åº“åç§°
    ```
2.  **è¿›å…¥åç«¯ç›®å½•å¹¶å®‰è£…ä¾èµ–ï¼š**
    ```bash
    cd backend/ # å‡è®¾ä½ çš„signa-server.jsåœ¨backendç›®å½•ä¸‹
    npm install
    ```
    ï¼ˆå¦‚æœä½ çš„`signa-server.js`ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œåˆ™è·³è¿‡`cd backend`ï¼‰
3.  **é…ç½®APIå‡­è¯ï¼š**
    *   æ‰“å¼€ `signa-server.js` æ–‡ä»¶ã€‚
    *   æ‰¾åˆ°ä»¥ä¸‹è¡Œï¼Œå¹¶æ›¿æ¢ä¸ºæ‚¨çš„å®é™…å‡­è¯ï¼š
        ```javascript
        // const APPID = 'YOUR_APPID';
        // const APISecret = 'YOUR_APISECRET';
        // const APIKey = 'YOUR_APIKEY';

        // ç¤ºä¾‹ï¼š
        const APPID = 'xxxxxxxx-xxxxxxxx-xxxxxxxx'; // æ›¿æ¢ä¸ºä½ çš„AppID
        const APISecret = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'; // æ›¿æ¢ä¸ºä½ çš„APISecret
        const APIKey = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'; // æ›¿æ¢ä¸ºä½ çš„APIKey
        ```
    *   **é…ç½®æœåŠ¡å™¨ç›‘å¬åœ°å€å’Œç«¯å£ï¼š**
        ```javascript
        const port = 3000; // ä½ å¸Œæœ›åç«¯ç›‘å¬çš„ç«¯å£
        // app.listen(port, 'localhost', () => { // åŸå§‹ä»£ç å¯èƒ½å¦‚æ­¤
        app.listen(port, '0.0.0.0', () => { // æ›´æ”¹ä¸º0.0.0.0å…è®¸å¤–éƒ¨è®¿é—®
            console.log(`Server running on port ${port}`);
        });
        ```
    *   **é…ç½®CORS (è·¨åŸŸèµ„æºå…±äº«)ï¼š**
        åœ¨ `signa-server.js` ä¸­æ·»åŠ æˆ–ä¿®æ”¹ CORS é…ç½®ï¼Œå…è®¸ä½ çš„å­¦é™¢å®˜ç½‘åŸŸåè®¿é—®ï¼š
        ```javascript
        const cors = require('cors');
        app.use(cors({
            origin: 'https://www.your-academy-domain.edu', // æ›¿æ¢ä¸ºä½ çš„å­¦é™¢å®˜ç½‘åŸŸå
            methods: ['GET', 'POST'],
            allowedHeaders: ['Content-Type', 'Authorization']
        }));
        // å¦‚æœæœ‰å¤šä¸ªåŸŸåï¼Œå¯ä»¥è®¾ç½®ä¸ºæ•°ç»„ï¼š
        // origin: ['https://www.your-academy-domain.edu', 'https://another-domain.com'],
        ```
4.  **å¯åŠ¨åç«¯æœåŠ¡ï¼š**
    æ¨èä½¿ç”¨ `pm2` ç­‰è¿›ç¨‹ç®¡ç†å·¥å…·æ¥å¯åŠ¨æœåŠ¡ï¼Œç¡®ä¿å…¶åœ¨åå°è¿è¡Œä¸”åœ¨æœåŠ¡å™¨é‡å¯åè‡ªåŠ¨æ¢å¤ã€‚
    ```bash
    # å®‰è£…pm2 (å¦‚æœæœªå®‰è£…)
    npm install -g pm2
    # å¯åŠ¨æœåŠ¡
    pm2 start signa-server.js --name translation-backend
    # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
    pm2 list
    # è®¾ç½®å¼€æœºè‡ªå¯
    pm2 save
    pm2 startup
    ```
5.  **é˜²ç«å¢™é…ç½®ï¼š**
    ç¡®ä¿æœåŠ¡å™¨é˜²ç«å¢™å¼€æ”¾äº†ä½ åç«¯æœåŠ¡ç›‘å¬çš„ç«¯å£ï¼ˆä¾‹å¦‚ `3000`ï¼‰ã€‚

### 3. å‰ç«¯æ–‡ä»¶éƒ¨ç½² (`app.js` ç­‰)

å‰ç«¯æ–‡ä»¶éœ€è¦éƒ¨ç½²åˆ°å­¦é™¢å®˜ç½‘çš„ Web æœåŠ¡å™¨ä¸Šï¼Œå¹¶åµŒå…¥åˆ°å®˜ç½‘ä¸»é¡µã€‚

1.  **å°†å‰ç«¯æ–‡ä»¶ä¸Šä¼ è‡³WebæœåŠ¡å™¨ï¼š**
    å°† `app.js`, `index.umd.js`, `processor.worker.js`, `processor.worklet.js` ä»¥åŠæ‰€æœ‰ç›¸å…³çš„ CSS æ–‡ä»¶ï¼ˆä¾‹å¦‚ `floating-window.css`ï¼‰ä¸Šä¼ åˆ°å­¦é™¢ Web æœåŠ¡å™¨çš„æŸä¸ªå…¬å¼€å¯è®¿é—®çš„ç›®å½•ï¼Œä¾‹å¦‚ï¼š
    `/var/www/html/your-academy-website/translation-widget/`
    æˆ–è€…ä½ çš„é¡¹ç›®ç»“æ„å¯èƒ½ç›´æ¥å°±æ˜¯ï¼š
    `./dist/` æˆ– `./frontend/` ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ã€‚

2.  **ä¿®æ”¹å‰ç«¯ `app.js` é…ç½®ï¼š**
    æ‰“å¼€ä½ ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ `app.js` æ–‡ä»¶ï¼Œæ‰¾åˆ°è¯·æ±‚åç«¯ç­¾åçš„ URLï¼Œå¹¶æ›¿æ¢ä¸ºä½ çš„åç«¯æœåŠ¡å®é™…åœ°å€ã€‚
    ```javascript
    // åœ¨ app.js ä¸­æ‰¾åˆ°ç±»ä¼¼ä»¥ä¸‹çš„ä»£ç ï¼š
    // const backend_url = 'http://localhost:3000';
    const backend_url = 'https://your-backend-server-ip-or-domain:3000'; // æ›¿æ¢ä¸ºä½ çš„åç«¯æœåŠ¡å®é™…åœ°å€
    ```
    è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„åç«¯æœåŠ¡ä½¿ç”¨äº† HTTPSï¼Œè¿™é‡Œä¹Ÿè¦æ”¹æˆ `https://`ã€‚

3.  **åœ¨å­¦é™¢å®˜ç½‘ä¸»é¡µåµŒå…¥æµ®çª—ä»£ç ï¼š**
    æ‰“å¼€å­¦é™¢å®˜ç½‘çš„ HTML ä¸»é¡µæ–‡ä»¶ (ä¾‹å¦‚ `index.html` æˆ– `.php` æ–‡ä»¶)ï¼Œåœ¨ `<body>` æ ‡ç­¾çš„**æœ«å°¾**ï¼ˆ`</body>` ä¹‹å‰ï¼‰æ’å…¥æµ®çª—çš„ HTML ç»“æ„å’Œ JavaScript/CSS å¼•ç”¨ã€‚

    **ç¤ºä¾‹ HTML ç»“æ„ (æ ¹æ®ä½ çš„å®é™…æµ®çª—HTML):**
    ```html
    <!-- å®æ—¶ç¿»è¯‘æµ®çª—å®¹å™¨ -->
    <div id="xf-translation-floating-window" class="xf-floating-window">
        <!-- æµ®çª—æ ‡é¢˜æ ï¼Œç”¨äºæ‹–åŠ¨ -->
        <div class="xf-window-header">
            <span>å®æ—¶ç¿»è¯‘</span>
            <button id="xf-close-button">X</button>
        </div>
        <!-- æ§åˆ¶æŒ‰é’®åŒºåŸŸ -->
        <div class="xf-window-controls">
            <button id="xf-start-button">å¼€å§‹ç¿»è¯‘</button>
            <button id="xf-stop-button" disabled>åœæ­¢ç¿»è¯‘</button>
            <!-- æ›´å¤šæŒ‰é’®å¦‚åˆ‡æ¢è¯­è¨€ç­‰ -->
        </div>
        <!-- ç¿»è¯‘ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
        <div class="xf-window-content">
            <p>**åŸæ–‡:** <span id="xf-original-text">ç­‰å¾…è¯­éŸ³è¾“å…¥...</span></p>
            <p>**è¯‘æ–‡:** <span id="xf-translated-text">ç­‰å¾…ç¿»è¯‘ç»“æœ...</span></p>
        </div>
    </div>
    ```

    **ç¤ºä¾‹ JavaScript/CSS å¼•ç”¨ (æ ¹æ®ä½ çš„å®é™…æ–‡ä»¶è·¯å¾„):**
    å°†è¿™äº› `<link>` å’Œ `<script>` æ ‡ç­¾æ”¾åœ¨ä½ çš„ HTML æ–‡ä»¶çš„ `<head>` æˆ– `<body>` æœ«å°¾ã€‚
    ```html
    <!-- æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="/path/to/translation-widget/floating-window.css">

    <!-- è®¯é£SDKæ–‡ä»¶ -->
    <script src="/path/to/translation-widget/index.umd.js"></script>
    <script src="/path/to/translation-widget/processor.worker.js"></script>
    <script src="/path/to/translation-widget/processor.worklet.js"></script>

    <!-- ä½ çš„ä¸»è¦åº”ç”¨é€»è¾‘ -->
    <script src="/path/to/translation-widget/app.js"></script>
    ```
    **è¯·ç¡®ä¿ `/path/to/translation-widget/` æ˜¯ä½ å®é™…ä¸Šä¼ æ–‡ä»¶åˆ° Web æœåŠ¡å™¨åçš„æ­£ç¡®ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚**

## ğŸ”§ å¼€å‘ä¸ç»´æŠ¤

### æœ¬åœ°å¼€å‘

1.  å…‹éš†ä»“åº“ï¼š`git clone https://github.com/ä½ çš„GitHubç”¨æˆ·å/ä½ çš„ä»“åº“åç§°.git`
2.  è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼š`cd ä½ çš„ä»“åº“åç§°`
3.  **åç«¯å¼€å‘ï¼š**
    *   è¿›å…¥åç«¯ç›®å½•ï¼š`cd backend/` (æˆ–ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•)
    *   å®‰è£…ä¾èµ–ï¼š`npm install`
    *   å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š`node signa-server.js` (æˆ–è€… `nodemon signa-server.js` å¦‚æœä½ å®‰è£…äº† nodemon)
    *   ç¡®ä¿ä½ çš„ `APPID`, `APISecret`, `APIKey` åœ¨ `signa-server.js` ä¸­é…ç½®æ­£ç¡®ã€‚
4.  **å‰ç«¯å¼€å‘ï¼š**
    *   åœ¨ `app.js` ä¸­å°† `backend_url` è®¾ç½®ä¸º `http://localhost:3000` (å¦‚æœåç«¯åœ¨æœ¬åœ°3000ç«¯å£è¿è¡Œ)ã€‚
    *   ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `index.html` (æˆ–é€šè¿‡ä¸€ä¸ªç®€å•çš„æœ¬åœ°WebæœåŠ¡å™¨å¦‚ `http-server` å¯åŠ¨)ã€‚

### è´¡çŒ®

æ¬¢è¿é€šè¿‡ Pull Request æäº¤ä»£ç è´¡çŒ®ï¼åœ¨æäº¤ PR ä¹‹å‰ï¼Œè¯·ï¼š

1.  Fork æœ¬ä»“åº“ã€‚
2.  åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)ã€‚
3.  æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)ã€‚
4.  æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ (`git push origin feature/AmazingFeature`)ã€‚
5.  æ‰“å¼€ä¸€ä¸ª Pull Requestã€‚

## ğŸ“ è”ç³»æ–¹å¼

*   ä½ çš„å§“å/é¡¹ç›®ç»´æŠ¤è€…
*   ä½ çš„é‚®ç®±/GitHub Profile: [ä½ çš„GitHubç”¨æˆ·å](https://github.com/ä½ çš„GitHubç”¨æˆ·å)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦æƒ…è¯·è§ `LICENSE` æ–‡ä»¶ã€‚

---
